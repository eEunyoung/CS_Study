> **TDD는 죽었다.**   
> David Heinemeier Hansson  
>   

2014년에 Rail의 개발자로 유명한 David Heinemeier Hansson (이하 DHH)가 블로그에 올린 하나의 글이 일파만파 퍼지면서 TDD가 뜨거운 감자로 떠오르던 때가 있었습니다. (※ 실제 DHH의 본문은 인수테스트 대한 비판이 중점입니다.)

그리고 현재, TDD는 선택이 아닌 필수로 자리 잡고 있습니다.  

이 글에서 TDD가 무엇이길래 개발자들에게 필수가 되었는지 알아보려고 합니다.
<br>
<br>

**TDD에 들어가기에 앞서 TDD의 기반이 되는 단위테스트에 대해 한 번 짚고 넘어가겠습니다.**

### **단위 테스트는 왜 해야할까?**

#### **단위 테스트란?** 

> 테스트 가능한 가장 작은 단위의 모듈을 실행하여 올바른 결과물이 출력되는 지 확인하는 테스트

#### **단위 테스트가 왜 중요한가?**

이 질문에 대한 많은 답이 있지만 핵심은 다음과 같습니다.

-   적은 비용과 시간  
    -   테스팅에 대한 시간과 비용을 절감할 수 있습니다.
-   유지보수 용이
    -   새로운 기능 추가 시에 수시로 빠르게 테스트 할 수 있습니다.
-   안정성 확보
    -   리팩토링 시 안정성을 확보할 수 있습니다.

그럼 단위 테스트를 기반으로한 TDD는 무엇일까요? 이제 본격적으로 TDD에 대해 알아보겠습니다.

<br>
<br>

### **TDD란?**

> 테스트 주도 개발 (Test Driven Development)

-   단위 테스트를 기반으로 테스트 코드를 먼저 작성하는 개발 방법론입니다.
-   짧은 개발 주기의 반복에 의존합니다.
-   작동하는 깔끔한 코드를 작성하는 것을 목표로 합니다.
-   애자일 방법론 중 하나인 eXtream programming(XP)의 'Test-First' 개념에 기반합니다.

> 📍 eXtreme programming(XP) 란?  
> 수시로 발생하는 고객의 요구사항에 유연하게 대응하기 위해 고객의 참여와 개발 과정의 반복을 극대화하여 개발 생산성을 향상시키는 방법

<br>
<br>

### **TDD 단계**
<img src="https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/TDD-%E1%84%80%E1%85%A2%E1%84%87%E1%85%A1%E1%86%AF%E1%84%8C%E1%85%AE%E1%84%80%E1%85%B5.png?w=1024&ssl=1" width="50%" height="50%">

1.  Red 단계
    -   실패하는 테스트를 작성합니다.
        -   내부 구현은 에러를 던져 테스트를 실패하게 합니다.
2.  Green 단계
    -   실패한 테스트를 성공시킵니다.
        -   모든 테스트를 통과시키는 것을 목표로 합니다.
    -   테스트 퀄리티는 다음 단계에서 생각한다.
3.  Blue 단계  
    -   리팩토링 합니다.
    -   완벽하게 작성된 테스트 단계입니다.

<br>
<br>

### **일반 개발 방식 vs TDD  개발 방식** 

**일반 개발 방식**

<img src="https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/%E1%84%80%E1%85%B5%E1%84%8C%E1%85%A9%E1%86%AB%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3.png?w=514&ssl=1" width="50%" height="50%">

일반 개발 방식은 '요구사항 분석 → 설계 → 개발 → 테스트 → 배포'의 형태로 개발주기를 갖습니다.

일방 개발 방식은 개발을 느리게 하는 잠재적 위험이 존재!

소비자는 처음부터 명확한 요구사항을 주지 않기에 완벽한 설계를 하기란 매우 어려운 일입니다. 

요구사항의 변경으로 인한 재설계는 소스코드의 품질을 저하시키고 테스트 비용을 증가시킵니다.

<br>
<br>

**TDD 개발 방식**
<img src="https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/TDD%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3.png?w=528&ssl=1" width="50%" height="50%">

TDD와 일반 개발 방식의 가장 큰 차이점은 테스트 코드를 작성한 뒤에 실제 코드를 작성한다는 것입니다.

1.  디자인 단계
    -    소프트웨어 목적과 테스트 케이스를 미리 정의해야합니다.
2.  테스트 코드 작성 단계
    -   발생하는 버그, 수정사항을 테스트 케이스에 추가하여 설계를 개선합니다.
3.  코드 개발
    -   테스트가 통과된 코드만을 실제 코드로 작성합니다.

> 이러한 반복적인 단계가 진행되면서 자연스럽게 버그가 줄어들고 소스코드는 간결해집니다.

<br>
<br>

### **TDD의 대표적인 툴 'JUnit'**

> 현재 전 세계적으로 가장 널리 사용되는 'Java 단위 테스트 프레임워크'

<br>
<br>

### **TDD 장점**

-   디버깅 시간을 단축할 수 있습니다.
    -   TDD의 경우 자동화 된 유닛테스팅을 전재하므로 특정 버그를 손 쉽게 찾아낼 수 있습니다.
-   빠른 피드백이 가능합니다.
    -   TDD는 기능 단위로 테스트를 진행하기 때문에 코드가 모두 완성되어도 정확한 원인 파악이 가능합니다.
-   생산성을 높일 수 있습니다.
    -   사용자에게 도달하기 전에 문제가 없는지 먼저 진단 받을 수 있기 때문에 코드가 지닌 불안정성과 불확실성을 지속적으로 해소해줍니다.
-   재설계 시간을 단축 할 수 있습니다.
    -   실제 개발 전  소프트웨어의 목적을 정의하고, 여러가지 테스트 시나리오를 작성하면서 다양한 예외 상황을 생각해 볼 수 있기 때문에 소프트웨어의 전반적인 설계가 변경되는 일을 방지할 수 있습니다.
-   추가 구현이 용이합니다.
    -   개발이 완료된 소프트웨어에 어떤 기능을 추가할 때 가장 우려되는 점은 기존 코드에 어떤 영향을 미칠지 알지 못한다는 것이다. 하지만 TDD의 경우 자동화된 유닛 테스팅을 전제하므로 테스트 기간을 획기적으로 단축시킬 수 있습니다.

<br>
<br>

### **TDD 단점** 

-   생산성이 저하됩니다.
    -   처음부터 2개의 코드를 짜야하고 테스트를 하면서 고쳐나가야하기 때문에 실제로는 TDD 방식의 개발 시간은 일반 개발 방식보다 늘어납니다.
    -   납기일 준수가 우선시 되는 프로젝트에서는 잘 사용되지 않습니다.

📌 **TDD를 잘 사용하지 않는 이유**  
      자신이 하던 개발방식을 많이 바꿔야 하고 구조에 얽매이게 됩니다.

<br>
<br>

### **마치며**

> **TDD는 불안함을 지루함으로 바꾸는 마법의 돌이다.**  
> Kent Beck

누구나 완벽한 소프트웨어를 만들고 싶어하지만 현실은 녹록지 않습니다.

TDD는 완벽한 결과물을 만들어 내도록 하는 것이 아닌 개발자가 '완벽을 추구하는 태도'를 가지도록 하는 개발 방식이라고 합니다. 그 태도를 가지는 것 자체가 개발자로서의 성장이 아닐까 생각합니다.
<br>
<br>
<br>

📌 **참고**<br>
[단위테스트란?](https://mangkyu.tistory.com/182) <br>
[TDD설명, 이미지](https://hanamon.kr/tdd%EB%9E%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A3%BC%EB%8F%84-%EA%B0%9C%EB%B0%9C/) <br>
[TDD설명](https://inpa.tistory.com/entry/QA-%F0%9F%93%9A-TDD-%EB%B0%A9%EB%B2%95%EB%A1%A0-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A3%BC%EB%8F%84-%EA%B0%9C%EB%B0%9C)
