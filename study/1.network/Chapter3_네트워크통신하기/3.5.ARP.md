## 3장 네트워크 통신하기
-----------------------------------
-----------------------------------
### 5. ARP
##### &nbsp; 1) ARP란?
##### &nbsp; &nbsp; (1) ARP 정의
&nbsp; &nbsp; ![ARP](https://images.velog.io/images/combi_jihoon/post/177de73c-8eb5-40df-9ae7-bb896b2382ef/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-10-19%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.14.53.png)
##### &nbsp; &nbsp; &nbsp; - 데이터 통신을 위해 2계층 물리적 주소인 MAC 주소와 3계층 논리적 IP 주소 두개를 연계시켜 주기 위해 사용되는 프로토콜이다.
##### &nbsp; &nbsp; &nbsp; - TCP-이더넷 프로토콜과 같이 3계층 논리적 주수와 2계층 물리적 주소 사이에 관계없는 프로토콜에서 ARP 프로토콜과 같은 메커니즘을 사용해 물리적 주소와 논리적 주소를 연결한다.
##### &nbsp; &nbsp; (2) ARP 동작
[ARP동작](https://musclebear.tistory.com/12)
##### &nbsp; &nbsp; (3) GARP
##### &nbsp; &nbsp; &nbsp; - 대상자 IP필드에 자신의 IP 주소를 채워 ARP에 요청을 보낸다.
##### &nbsp; &nbsp; &nbsp; - 자신의 IP와 MAC 주소를 알릴 목적으로 사용된다.
##### &nbsp; &nbsp; &nbsp; - 목적지 MAC 주소는 브로드캐스트 MAC 주소를 사용한다.
##### &nbsp; &nbsp; &nbsp; - GARP 패킷 형식
##### &nbsp; &nbsp; &nbsp; &nbsp; : 송신자 MAC 주소 = 자신의 MAC 주소
##### &nbsp; &nbsp; &nbsp; &nbsp; : 송신자 IP 주소 = 자신의 IP 주소
##### &nbsp; &nbsp; &nbsp; &nbsp; : 대상자 MAC 주소 = 모두 0으로 표기하여 00:00:00:00:00:00
##### &nbsp; &nbsp; &nbsp; &nbsp; : 대상자 IP 주소 = 자신의 IP 주소
##### &nbsp; &nbsp; &nbsp; - GARP를 사용해 동일 네트워크에 자신의 IP와 MAC 주소를 알려주는 이유
##### &nbsp; &nbsp; &nbsp; &nbsp; : IP 주소 충돌 감지
##### &nbsp; &nbsp; &nbsp; &nbsp; : 상대방(동일 서브넷 상의 다른)의 ARP 테이블 갱신
##### &nbsp; &nbsp; &nbsp; &nbsp; : HA(고가용성) 용도의 클러스터링, VRRP, HSRP
##### &nbsp; &nbsp; &nbsp; - IP 주소 충돌 감지
##### &nbsp; &nbsp; &nbsp; &nbsp; : IP 주소는 유일하게 할당되어야 하기 때문에 충돌 예방을 위해 GARP를 통해 확인할 수 있다.
##### &nbsp; &nbsp; &nbsp; - 상대방(동일 서브넷 상의 다른)의 ARP 테이블 갱신
&nbsp; &nbsp; ![garp](data:image/png;base64,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)
##### &nbsp; &nbsp; &nbsp; &nbsp; : 가상 MAC 주소를 사용하지 않는 데이터베이스 HA 솔루션에서 주로 사용한다.
##### &nbsp; &nbsp; &nbsp; &nbsp; : 데이터베이스 HA는 주로 두 데이터베이스 서버가 하나의 가상 IP주소로 서비스한다. 두 대의 데이터베이스 중 한 대만 동작하고 나머지 한 대는 대기하는 액트브-스탠바이로 동작한다. 액티브 상태인 서버가 가상 IP 주소 요청에 응답해 서비스하지만 MAC 주소는 가상 주소가 아닌 실제 MAC 주소를 사용한다.
##### &nbsp; &nbsp; &nbsp; &nbsp; : 단말의 ARP 테이블을 갱신하는 것이 목적이다.
##### &nbsp; &nbsp; &nbsp; - 클러스터링, FHRP(VRRP, HSRP)
&nbsp; &nbsp; ![garp](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTWdCuIimG9ougjaqF8akwuBxbp9nkvZJ-xuTXySXU7ao7oai4zlqcHVai1DF_dykTad3Q&usqp=CAU)
##### &nbsp; &nbsp; &nbsp; &nbsp; : 장비 이중화를 위해 사용 되지만 실제 MAC 주소를 사용하지 않고 가상 MAC을 사용하는 클러스터링, VRRP와 같은 FHRP에서도 GARP가 사용된다.
##### &nbsp; &nbsp; &nbsp; &nbsp; : 네트워크에 있는 스위치 장비의 MAC 테이블 갱신이 목적이다.
##### &nbsp; &nbsp; &nbsp; &nbsp; : ARP 테이블 갱신이 필요 없다.
##### &nbsp; &nbsp; (4) RARP
&nbsp;&nbsp; ![rarp](https://i2.wp.com/ipwithease.com/wp-content/uploads/2020/06/ARP-VS-RARP.jpg)
##### &nbsp; &nbsp; &nbsp; - ARP 동작을 반대로 하는 프로토콜로 GARP처럼 ARP 프로토콜 구조는 같지만 필드에 들어가는 내용은 다르고 원래 목적과 반대로 사용된다.
##### &nbsp; &nbsp; &nbsp; - IP 주소가 정해져 있지 않은 단말이 IP 할당ㅇ르 요청할 때 사용한다.
##### &nbsp; &nbsp; &nbsp; - 과거에 네트워크 호스트의 주소 할당에 사용되었지만 제한된 기능으로 인해 BOOTP와 DHCP로 대체되어 사용되지않는다.
