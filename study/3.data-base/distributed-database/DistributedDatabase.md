> 분산 처리 시스템



기존 데이터베이스에서 성능의 향상을 원할 경우
수직 확장(Scale up) 혹은 수평 확장(Scale out)을 해야한다.

## 수직 확장(Scale up)

![](https://i.imgur.com/O763pAX.png)

-
- 서버의 하드웨어 성능을 강화함으로써 처리 능력을 향상 시키는 방법.
    - 이는 CPU, RAM, 저장 공간 등의 업그레이드를 통해 이루어진다.
- 수직 확장은 구현이 비교적 간단하고, 기존 시스템의 변경 없이도 성능 향상이 가능하다.
  하지만, 하드웨어의 물리적 한계에 의해 확장에는 한계가 있다.
- 고성능의 서버는 비용이 많이 든다
- SPOF(단일 장애 지점) 발생 시 답이 없다.

## 수평 확장(Scale out)

![](https://i.imgur.com/SIscBkl.png)

- 여러 대의 서버를 네트워크로 연결하여 처리 능력을 향상 시키는 방법
  여러 서버에 데이터베이스의 부하를 분산해 처리한다.
- 수평 확장은 더 많은 서버를 추가함으로써 거의 무한대로 확장이 가능하다
- SPOF(단일 장애 지점) 발생 시 그나마 유연하게 대응 가능하다.
- 수평 확장은 데이터베이스 설계의 복잡성이 매우 증가하고
- 데이터 일관성 유지의 어려움, 네트워크 비용 증가 등의 문제를 수반할 수 있다.

수직 확장과 수평 확장은 각각의 장단점이 있으며,
사용하는 시스템의 요구 사항과 목표에 따라 적절히 선택하여 사용하는 것이 중요하다.
예를 들어, 높은 처리량을 요구하는 대규모 분산 시스템의 경우 수평 확장이 효과적일 수 있으며,
비교적 작은 시스템에서는 수직 확장이 더 경제적일 수 있다.

일반적으로는 서비스의 규모가 커져 확장을 고려 시 고민할 점이 많지만
클라우드라는 전제하에 일단 트래픽 처리를 위한 수직 확장을 진행 후 안정화 하며 수평 확장을 진행한다.

---


분산 데이터베이스 시스템은 수평 확장에 기반해서 진행된다.
고려해야할 점이 매우 매우 많은데 간략하게 언급하면서 진행하겟다.

### 고려해야할 점

1. 물리적 / 논리적 분산
2. 물리적 / 논리적 보안
3. PK 관리 규칙
4. 투명 해야 한다 : 모든 분산 된 데이터베이스가 하나로 인지 되어야 한다.
5. 일관성
    1. 트랜잭션 , 락 등
6. 부하의 분산 방식
7. 네트워크 지연 , 대열폭

검색 중 찾은 내용.

![](https://i.imgur.com/3Pozhyp.png)

<br>

![](https://i.imgur.com/6USMcQa.png)

-----

## 분산 기법

**테이블 위치 분산**

- 테이블의 구조는 변하지 않고, 다른 데이터베이스에 중복되어 생성되지 않는다.
- 그저 설계된 테이블의 위치를 각각 다르게 위치시키는 것이다.
- 각 위치 별로 필요로 하는 정보가 서로 다를 때 사용한다.
- 테이블의 위치가 다르므로, 테이블의 위치를 파악할 수 있는 도식화된 데이터베이스 문서가 필요하다.
- ex) 1~6에의 자료를 본사에서는 1~3을 지사에서는 4~6을 관리한다.

![](https://i.imgur.com/4P0hGxi.png)

**테이블 분할 분산**

- 수평분할: 각 지사별로 사용하는 Row가 다를 때 이용한다.- 각 지사의 테이블에서 통합처리를 해야 하는 경우 조인이 발생하여 성능 저하가 발생할 수 있다.
- 한 지사에서 하나의 데이터만 존재하므로 데이터의 무결성은 보장된다.
- ex) 지사1은 고객 100명 데이터중에 1~50을 가지고, 지사2는 51~100의 데이터를 갖는다.

![](https://i.imgur.com/CPcKQ4y.png)

- 수직분할: 칼럼을 기준으로 Column을 분리한다.
- 칼럼을 기준으로 분할했기 때문에 각각의 테이블에는 동일한 Primary Key와 값을 가지고 있어야 한다.
- 데이터를 한군데 모아도 동일한 Primary Key는 하나로 표현 가능하므로 데이터 중복은 발생하지 않는다.
- ex) 제품의 재고량은 지사별로 관리, 제품의 단가는 본사에서 관리한다.
- 본사 = 제품번호(Pk) + 단가 , 지사 = 제품번호(Pk) + 재고량

**테이블 복제 분산**

- 부분복제: 통합된 데이터는 본사에, 각 지사별로는 나누어진 로우를 가지고 있다.
- 본사의 데이터는 지사 데이터들의 합이다.
- 전체 데이터의 통합처리도 본사의 테이블을 이용하므로 여러 테이블에 조인이 발생하지 않는다.
- 실제 프로젝트에서 많이 사용하는 데이터베이스 분산 기법이다.
- 지사에서 데이터의 입력, 수정, 삭제가 발생하여 본사에서 많이 이용한다.
- ex) 본사는 전국 회원정보를 가진다. 지사1은 남자 회원정보를 지사2는 여자 회원정보를 가진다.
- 본사 = 지사1 + 지사2

![](https://i.imgur.com/isD5JcM.png)

- 광역복제: 통합된 테이블을 본사에도 가지고 있고, 각 지사에도 본사랑 동일한 데이터를 모두 가진다.
- 본사에서는 데이터를 관리하고, 지사에서는 데이터를 읽어 업무 프로세스를 발생시킨다.
- 실제로 프로젝트에서 많이 쓰이는 데이터베이스 분산기법이다.
- 본사에서 데이터가 입력, 수정, 삭제가 되어 지사에서 이용한다.

**테이블 요약 분산**

- 분석요약: 각 지사별로 존재하는 요약정보를 본사에 통합하여, 다시 전체에 대해 요약정보를 산출한다.
- 통합 통계 데이터에 대한 정보제공에 용이한 분산기법이다.
- ex) 지사1 = 판매실적 요약본, 지사2 = 판매실적 요약본 ---> 본사 = 전체 판매실적 요약본- 통합요약: 각 지사별로 존재하는 다른 내용의 정보를 본사에 통합하여, 다시 전체에 대한 요약정보를 산출한다.
- 각 지사는 타지사와 다른 요약정보를 가지고 있다.
- 통합 요약은 지사에서 요약한 정보를 본사에서 취합하여, 각 지사 별의 데이터를 비교하기 위해 사용한다.
- 통합 통계 데이터에 대한 정보 제공에 용이한 분산 기법이다.