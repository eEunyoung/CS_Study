## 스트림 소개

### 스트림이란 무엇인가?

#### 스트림<br>
- 자바 8 API에 새로 추가된 기능
- 스트림을 이용하면 선언형으로 컬렉션 데이터 처리 가능
- 멀티스레드 코드를 구현하지 않아도 데이터를 병렬처리 가능
> 선언형 : 더 간결하고 가독성이 좋아짐
> 조립할 수 있음 : 유연성이 좋아짐
> 병렬화 : 성능이 좋아짐

### 스트림 시작하기

<br>

#### 스트림 정의
> 데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소
- 연속된 요소 
  - 컬렉션과 마찬가지로 스트림은 특정 요소 형식으로 이루어진 연속된 값의 인터페이스를 제공
  - 컬렉션의 주제는 데이터(ArrayList, LinkedList)고 스트림의 주제는 계산(filter, sorted)
- 소스
  - 컬렉션, 배열, I/O 자원 등의 데이터 제공 소스로부터 데이터를 소비
  - 리스트로 스트림을 만들면 스트림의 요소는 리스트의 요소와 같은 순서를 유지
- 데이터 처리 연산
  - 함수형 프로그래밍 언어에서 일반적으로 지원하는 연산과 데이터베이스와 비슷한 연산을 지원
  - 순차적으로 또는 병렬로 실행

#### 스트림 특징
- 파이프라이닝
  - 스트림 연산끼리 연결해서 커다란 파이프라인을 구성할 수 있도록 스트림 자신을 반환
  - 연산 파이프라인은 데이터 소스에 적용하는 데이터베이스 질의와 비슷
- 내부 반복
  - 내부 반복 지원


#### 스트림 예제
```
import static java.util.stream.Collectors.toList;
List<String> threeHighCaloricDishNames = 
    menu.stream() // 메뉴에서 스트림을 얻음
        .filter(dish -> dish.getCalories() >300) // 파이프라인 연산 만들기, 첫 번째로 고칼로리 요리 필터링
        .map(Dish::getName) // 요리명 추출
        .limit(3) // 선착순 세 개만 선택
        .collect(toList()); // 결과를 다른 리스트로 저장
```
<br>

### 스트림과 컬렉션

<br>

#### 스트림과 커렉션 차이(1)
> 데이터를 언제 계산하는가의 차이
- 컬렉션은 현재 자료구조가 포함하는 모든 값을 메모리에 저장하는 자료구조
  - 컬렉션의 모든 요소는 컬렉션에 추가하기 전에 계산되어야 함
- 스트림은 요청할 때만 요소를 계산하는 고정된 자료구조
  - 사용자가 요청할 때만 값을 계산
  - 단 한번만 소비할 수 있어 한번 탐색한 소스를 다시 탐색하려면 새로운 스트림을 만들어야함
<br>

#### 스트림과 커렉션 차이(2)
> 데이터 반복 처리 방법 차이 <br>

<img src = "https://mblogthumb-phinf.pstatic.net/20160506_52/qkrghdud0_1462507590856W6gT8_PNG/%BF%DC%BA%CE_%B3%BB%BA%CE_%B9%DD%BA%B9%C0%DA.png?type=w2" width = "50%"/> <br>
- 컬렉션은 사용자가 직접 요소를 반복(for-each, while...) = 외부 반복
  - 병렬성을 스스로 관리 -> 병렬성 포기 혹은 synchronized로 시작하는 복잡한 방법 
- 스트림은 반복을 알아서 처리해주고 결과 스트림값을 어딘가에 저장함 = 내부 반복
  - 투명하게 병렬로 처리하거나 더 최적화된 다양한 순서로 처리 가능

<br>

### 스트림 연산

<br>

#### 스트림 연산 종류
- 중간 연산
  - 연결할 수 있는 스트림 연산
  - filter, sorted 등등
- 최종 연산
  - 스트림을 닫는 연산
  - collect
 
#### 중간 연산
- 여러 중간 연산을 연결해서 질의를 만들 수 있음
- 최종 연산이 실행되기 전까지 아무 연산도 수행하지 않음
- 최적화 효과 
 
#### 중간 연산
- 스트림 파이프라인에서 결과 도출
- 최종 연산에 의해 List, Integer, void 등 스트림 이외의 결과가 반환
  
> ❗️중간 연산을 이용해서 파이프라인을 구성할 수 있지만 최종 연산 없이는 결과를 반환 할 수 없다.
  
  
#### 스트림 이용 과정
- 질의를 수행할 (컬렉션 같은) 데이터 소스
- 스트림 파이프라인을 구성할 중간 연산 연결
- 스트림 파이프라인을 실행하고 결과를 만들 최종 연산